$(function(){var g=null,h=null,e=null;$("body").on("mouseup",function(a){g=a.pageX-window.pageXOffset;h=a.pageY-window.pageYOffset});$("body").on("mousedown",function(a){a=$(a.target);e=a.hasClass("dd-item")?a:a.closest(".dd-item").length?a.closest(".dd-item"):null});var d=$(".dd"),b=function(){d.nestable({maxDepth:2}).off("change");d.nestable({maxDepth:2}).on("change",f)},f=function(a){if("undefined"!==typeof a){a=$(document.elementFromPoint(g,h));var k=!1;a.length&&(a.hasClass("dd")||0!==a.closest(".dd").length||
(k=!0));k&&null!==e&&(e.remove(),b())}$("#value").val(JSON.stringify(d.nestable("serialize")));c();$(window).trigger("resize")},c=function(){var a=($(".topicsLayout").data("widget-limits")+"").split(","),d=a.length,b=0;$(".topicsLayout li").each(function(){b++;b===parseInt($("input[name=options\\[thtopics_visibleFilterTopics\\]]").val())+1?$(this).addClass("topicsLayout--visibleFilterTopics"):$(this).hasClass("topicsLayout--visibleFilterTopics")&&$(this).removeClass("topicsLayout--visibleFilterTopics");
b===parseInt($("input[name=options\\[thtopics_visibleFilterTopicsVertical\\]]").val())+1?$(this).addClass("topicsLayout--visibleFilterTopicsVertical"):$(this).hasClass("topicsLayout--visibleFilterTopicsVertical")&&$(this).removeClass("topicsLayout--visibleFilterTopicsVertical");for(var c=0;c<d;c++)b===parseInt(a[c])+1&&parseInt(a[c])<parseInt($("input[name=options\\[thtopics_visibleFilterTopicsVertical\\]]").val())?$(this).addClass("topicsLayout--visibleFilterTopicsWidget"):$(this).hasClass("topicsLayout--visibleFilterTopicsWidget")&&
$(this).removeClass("topicsLayout--visibleFilterTopicsWidget")})},l=function(){$(".dd-list .dd-remove").click(function(a){$(a.target.closest(".dd-item")).remove();b();f()})};$(".suspenser-list .dd-item span").click(function(a){a=$(a.target.closest(".dd-item")).clone();a.find(".fa").toggleClass("fa-plus fa-bars");a.append($('<i class="fa fa-remove dd-remove"></i>'));d.find("> .dd-list").append(a);window.setTimeout(function(){l();b();f()},0)});$("input[name=options\\[thtopics_visibleFilterTopics\\]]").change(function(){c()});
$("input[name=options\\[thtopics_visibleFilterTopicsVertical\\]]").change(function(){c()});l();b();c()});