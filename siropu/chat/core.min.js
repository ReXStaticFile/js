!function(f,g,t,u){var b=navigator.userAgent;var s=/firefox/i.test(b);var n=/Edge/i.test(b);var a=!n&&/Chrome/i.test(b);var o=/Mobi|Android/i.test(b);var A=f("#siropuChat");var w=f("#siropuChatHeader");var C=f("#siropuChatTabs");var d=C.find('a[data-target="room-list"]');var h=C.find('a[data-target="conv-list"]');var i=C.find('a[data-target="conv-form"]');var v=f("#siropuChatContent");var D=f(".siropuChatMessages");var q=f("#siropuChatStartConversation");var r=f(".siropuChatConversation.siropuChatUsers");var j=f("#siropuChatNoConversations");var E=f("#siropuChatRooms");var B=f("#siropuChatSettings");var e=f("#siropuChatEditor");var c=e.find("form");var m=c.find('textarea[name="message_html"]');var l=c.find('button[type="submit"]');var y=f("#siropuChatBar");var x=f("#siropuChatBarMessageContainer");var p=f("#siropuChatBarUserCount span");var k=A.hasClass("siropuChatAllPages");var z=f(".siropuChatLogout");XF.SiropuChat={};XF.SiropuChat.Core=XF.Element.newHandler({options:{active:false},userId:0,canUseChat:true,loggedIn:f("#XF").data("logged-in"),channel:"room",screenSize:"l",serverTime:0,pageFocus:true,pageTitle:f("title").text(),tabNotification:false,tabNotificationInterval:null,roomId:1,primaryRoomId:0,lastId:{},convId:0,convUnread:{},convOnly:0,convItems:[],guestRoom:0,noticeLastUpdate:0,userLastUpdate:0,convLastActive:0,convLastUpdate:0,userUpdateInterval:30,convUpdateInterval:60,messageDisplayLimit:25,notificationTimeout:5000,isVisible:A.is(":visible"),refreshActive:5000,refreshActiveHidden:15000,refreshInactive:30000,refreshInactiveHidden:60000,refreshInterval:0,refreshSet:null,inverse:0,floadCheck:0,roomFloodCheck:0,bypassFloodCheck:false,displayNavCount:false,forceRoom:false,inIframe:g.frameElement,dynamicTitle:true,activeUsers:{},commands:{},sounds:{},loadMoreButton:{room:true,conv:true},forceAutoScroll:false,joinCommand:null,loadRooms:false,internalLinksInNewTab:false,roomTabUserCount:true,convTabCount:"onlineCount",userListOrder:"most_active",init:function(){this.getScreenSize();this.startRefreshInterval();this._initSubmitForm();this._initTabs();this._initRoomListActions();this._initRoomActions();this._initConversations();this._initAutoScrollToggle();this._initSounds();this._initOnLoad();B.on("change",f.proxy(this,"saveSettings"));y.on("click",f.proxy(this,"toggleChat"));A.on("new-message",f.proxy(this,"newMessage"));var F=this;if(k){f(".p-footer").css("padding-bottom",60)}f(g).scroll(function(){if(f(".p-navSticky").length&&f(".siropuChatAllPages.siropuChatMaximized").length){F.adjustContentHeight()}});f(g).resize(function(){if(o){return}F.getScreenSize();F.adjustContentHeight();F.adjustInputBox();if(F.inRoom()){if(C.length){F.switchRoom(F.roomId,true)}else{if(!F.getMiscSetting("hide_chatters")){var G=f('.siropuChatRoom.siropuChatUsers[data-room-id="'+F.roomId+'"]');if(F.screenSizeIs("s")){G.hide()}else{G.show()}}}}else{F.switchConversation(F.convId)}});f(g).blur(function(){F.pageFocus=false});f(g).focus(function(){F.pageFocus=true;if(F.tabNotificationInterval){clearInterval(F.tabNotificationInterval);f("title").text(F.pageTitle)}});f(t).on("click",".colorPicker-save",function(){F.saveSettings()});f(t).on("keyup",function(G){if(G.which==27&&k&&F.isVisible){F.toggleChat()}});f(t).on("click",".siropuChatMessageRow.siropuChatBot ol li b",function(){F.editorSetHtml(f(this).html())});f(t).on("siropuChat:show-load-more",".siropuChatMessages",function(){if(F.inRoom()&&!F.loadMoreButton.room||F.inConv()&&!F.loadMoreButton.conv){return}if(f(this).find("> li[data-id]").length<F.messageDisplayLimit){return}var H=f('<li class="siropuChatLoadMoreMessages" style="display: none;" />');var G=f('<a class="button button--link" data-xf-click="siropu-chat-load-more-messages" />');G.html(XF.phrase("siropu_chat_load_more_messages")).appendTo(H);if(f(this).find(".siropuChatLoadMoreMessages").length){return f(this).find(".siropuChatLoadMoreMessages").fadeIn()}if(F.inverse){H.appendTo(f(this)).fadeIn();f(this).scrollTop(1000000)}else{H.prependTo(f(this)).fadeIn()}XF.activate(H)});f(t).on("click",function(G){if(k&&F.isVisible&&G.target.className.match("p-")){y.trigger("click")}});this.$target.on("mouseover mouseout",".siropuChatMessageRow",function(H){var I=f(this).find(".siropuChatMessageActions");var G=f(this).find(".siropuChatDateTime");if(I.length){if(H.type=="mouseover"){I.show();G.hide()}else{I.hide();G.show()}}});f(t).on("click",".siropuChatMessageText .link--internal",function(G){if(F.internalLinksInNewTab){G.preventDefault();g.open(f(this).attr("href"),"_blank")}});f("#siropuChatBarDisable").on("click",function(){f(this).find("i").removeClass("fa-toggle-off").addClass("fa-toggle-on");setTimeout(function(){B.find('input[name="disable"]').trigger("click")},1000)});setTimeout(function(){if(F.inRoom()&&F.loadRooms&&!F.getRoomCount()){d.click()}else{if(F.inConv()&&F.getConvCount()){r.find(".siropuChatActiveConversation").trigger("click",true)}}if(F.hasUnreadConversations()){F.addBarNewMessageClass()}},500);if(this.inRoom()&&this.isResponsive()){f(".siropuChatRoom.siropuChatUsers").hide()}this.joinCommand=this.getCommand("join");this.noticeLastUpdate=this.serverTime;this.userLastUpdate=this.serverTime;this.convLastUpdate=this.serverTime;this.convLastActive=this.serverTime;this.autoScroll();this.toggleLogout();this.toggleBotMessages()},getScreenSize:function(){if(g.matchMedia("(max-width: 768px)").matches){this.screenSize="s"}else{if(g.matchMedia("(max-width: 1024px)").matches){this.screenSize="m"}else{this.screenSize="l"}}},getRoomCount:function(){return A.find(".siropuChatMessages[data-room-id]").length},getConvCount:function(){return A.find("li[data-conv-id]").length},screenSizeIs:function(F){return this.screenSize==F},isResponsive:function(){return(this.screenSizeIs("s")||A.hasClass("siropuChatSidebar"))},newMessage:function(G,F){if(!this.pageFocus&&F.isSelf){return}if(F.action!="join"){this.playSound(F);if(!this.pageFocus){this.displayTabNotification(F);this.initDesktopNotification(F)}}},doMessageActions:function(L){if(!L.actions){return}for(var G in L.actions){var J=L.actions[G];for(var P in J){if(G=="rooms"&&this.lastId[P]===undefined){continue}if(G=="rooms"){var F=f('.siropuChatMessages[data-room-id="'+P+'"]')}else{var F=f('.siropuChatMessages[data-conv-id="'+P+'"]')}for(var N in J[P]){var I=J[P][N];var Q=F.find('> li[data-id="'+N+'"]');for(var O in I.action){if(Q.attr("data-last-change")==I.action[O]){continue}switch(O){case"edit":Q.find(".siropuChatMessageText").html(I.html);break;case"delete":Q.fadeOut();break;case"like":var H=Q.find(".siropuChatMessageLikes");if(H.length){if(I.likes){H.replaceWith(I.likes)}else{H.remove()}}else{Q.find(".siropuChatMessageText").after(I.likes)}break;case"react":var M=Q.find(".siropuChatReactions");if(M.length){if(I.reactions){M.html(I.reactions)}else{M.remove()}}else{Q.find(".siropuChatMessageText").after(I.reactions)}break;case"prune":if(I.prune){if(f.isNumeric(I.prune)){F.find('> li[data-user-id="'+I.prune+'"]').remove()}else{for(var K in I.prune){F.find('> li[data-id="'+I.prune[K]+'"]').remove()}}}else{F.find("> li").each(function(){if(f(this).data("id")<N){f(this).remove()}})}break}Q.attr("data-last-change",I.action[O])}}}}},updateHeaderTitle:function(F){if(this.dynamicTitle){w.find("> span").text(F.data("title"))}},updateRooms:function(X){var Q=this;var V=false;var W=false;if(X.rooms===undefined){return}for(var F in X.rooms){var M=v.find('.siropuChatRoom.siropuChatMessages[data-room-id="'+F+'"]');var K=v.find('.siropuChatRoom.siropuChatUsers[data-room-id="'+F+'"]');var T=f(X.rooms[F]["messages"]);var P=X.rooms[F]["users"];var L=X.rooms[F]["userCount"];var U=C.find('a[data-room-id="'+F+'"]');var S=K.find(".siropuChatNoRoomUsers");if(this.activeUsers[F]===undefined){this.activeUsers[F]=[]}var H=false;if(X.inactiveRoomId!==undefined||X.action!="submit"&&!this.getMiscSetting("hide_chatters")&&(X.action=="join"||X.updateUsers)){if(L){for(var J in P){var N=P[J];var I=N.activity;var R=N.status;var O=N.html;if(J){var Y=K.find('> li[data-user-id="'+J+'"]')}else{var Y=K.find('li[data-username="'+N.username+'"]')}if(O){if(Y.length){if(J==0){Y.find(".siropuChatActivityStatus").attr("data-status",I)}continue}if(S.length){K.html(O)}else{K.prepend(O)}if(J&&f.inArray(J,this.activeUsers[F])==-1){this.activeUsers[F].push(J);H=true}XF.activate(K)}else{if(Y.length){if(I=="inactive"){Y.remove();this.removeUserFromActiveUsers(F,J)}else{this.updateUser(Y,I,R)}}}}}else{this.activeUsers[F]=[];this.addNoRoomUsersMessage(K)}if(this.roomTabUserCount){U.find("span").html(L).attr("class",L?"siropuChatTabCountActive":"siropuChatTabCountInactive")}W=true}if(T.length){T=f.grep(T,function(Z){return M.find('> li[data-id="'+f(Z).data("id")+'"]').length?false:true});if(this.inverse){M.prepend(T)}else{M.append(T)}XF.activate(M);this.delayAutoscroll(X,M);this.deleteOlderMessages(X.serverTime,M);if(!U.hasClass("siropuChatActiveTab")){U.addClass("siropuChatNewMessage")}if(f(T).length){V=true}}if(H&&this.userListOrder=="alphabetically"){var G=K.find("> li").sort(function(aa,Z){return String.prototype.localeCompare.call(f(aa).data("username").toLowerCase(),f(Z).data("username").toLowerCase())});K.html(G)}}if(W){this.userLastUpdate=X.serverTime;this.updateNavUserCount(X)}this.updateLastId(X);this.updateRoomTabs(X);this.updateBar(X);if(V){X.channel="room";A.trigger("new-message",X)}},updateConversations:function(K){var P=this;var M=false;this.convUnread={};if(K.convContacts&&(K.action=="start"||K.updateConv)){if(this.convTabCount!="disabled"){h.find("span").html(K.convTabCount).attr("class",K.convTabCount?"siropuChatTabCountActive":"siropuChatTabCountInactive")}if(K.convItems!==undefined){this.convItems=K.convItems}for(var O in K.convContacts){var H=K.convContacts[O]["activity"];var I=K.convContacts[O]["status"];var L=K.convContacts[O]["html"];if(L){r.prepend(L);if(j.length){j.remove()}if(f.inArray(O,this.convItems)==-1){this.convItems.push(O)}}else{var N=r.find('> li[data-conv-id="'+O+'"]');if(N.length){this.updateUser(N,H,I)}}}this.convLastUpdate=K.serverTime}if(K.convMessages){for(var G in K.convMessages){var J=f(K.convMessages[G]);var F=f('.siropuChatConversation.siropuChatMessages[data-conv-id="'+G+'"]');if(F.length){J=f.grep(J,function(Q){return F.find('> li[data-id="'+f(Q).data("id")+'"]').length?false:true})}else{if(!this.convId||K.convId){F=this.createConversationMessageContainer(G);F.insertBefore(q);this.convId=K.convId?K.convId:G;setTimeout(function(){r.find('li[data-conv-id="'+P.convId+'"]').click()})}}if(this.inverse){F.prepend(J)}else{F.append(J)}XF.activate(F);this.delayAutoscroll(K,F);this.deleteOlderMessages(K.serverTime,F)}}if(K.convUnread){this.convUnread=K.convUnread;for(var G in K.convUnread){var N=r.find('li[data-conv-id="'+G+'"]');if(!N.hasClass("siropuChatNewMessage")){M=true}N.addClass("siropuChatNewMessage")}if(this.inRoom()){h.addClass("siropuChatNewMessage")}}if(M){K.channel="conv";A.trigger("new-message",K);this.addBarNewMessageClass()}},hasUnreadConversations:function(){return !f.isEmptyObject(this.convUnread)},markCurrentConversationAsRead:function(){if(this.convUnread[this.convId]!==undefined){var F=this;XF.ajax("POST",XF.canonicalizeUrl("index.php?chat/conversation/"+this.convId+"/mark-as-read"),{conv_unread:this.convUnread[this.convId]},function(G){if(G.convRead){delete F.convUnread[G.convRead]}},{skipDefault:true,global:false})}},createRoomMessageContainer:function(F){return f('<ul class="siropuChatRoom siropuChatMessages" data-room-id="'+F+'" data-autoscroll="1" />')},createConversationMessageContainer:function(F){return f('<ul class="siropuChatConversation siropuChatMessages" data-conv-id="'+F+'" data-autoscroll="1" />')},updateNotice:function(G){var H=f("#siropuChatNotice");if(G.notice&&(G.serverTime-this.noticeLastUpdate>=60||!H.length)){var F=f(G.notice);if(H.length&&H.find("span").text()==F.find("span").text()){return}F.find("span").hide();if(H.length){H.replaceWith(F)}else{w.after(F)}setTimeout(function(){F.find("span").fadeIn()});this.noticeLastUpdate=G.serverTime}if(!G.notice&&H.length){H.remove()}},updateUser:function(G,K,F){G.find(".siropuChatActivityStatus").attr("data-status",K);var J=G.find(".siropuChatUserStatus");var I=J.length;if(F){if(I){J.html(F)}else{var H=f('<div class="siropuChatUserStatus" />');H.html(F).appendTo(G)}}else{if(I){J.remove()}}},updateActivityStatus:function(F){if(F.action!="submit"&&this.options.active!=F.active){this.options.active=F.active;A.attr("data-active",F.active);this.resetRefreshInterval()}},updateNavUserCount:function(G){if(!this.displayNavCount){return}var F=f('a[data-nav-id="siropuChat"] span.badge');F.text(G.userCount);if(G.userCount){F.addClass("badge--active")}else{F.removeClass("badge--active")}},updateBar:function(F){if(!(F.lastRow&&k)){return}x.html(F.lastRow.message);y.attr("data-room-id",F.lastRow.roomId);if(F.action!="submit"&&!this.getMiscSetting("hide_chatters")){p.html(F.userCount)}},updateRoomTabs:function(G){if(this.forceRoom==true||this.loggedIn==false||G.joinedRooms===undefined){return}if(C.length){if(this.lastId&&G.joinedRooms){for(var F in this.lastId){if(f.inArray(Number(F),G.joinedRooms)==-1){this.leaveRoomPostActions(F)}}}else{if(this.getRoomCount()){this.postLogout()}}}},updateLastId:function(F){if(F.lastId===undefined||F.lastId.length===0){return}for(var G in F.lastId){this.lastId[G]=F.lastId[G]}},getRooms:function(){XF.ajax("GET",XF.canonicalizeUrl("index.php?chat/room/list"),{},function(F){if(F.html){XF.setupHtmlInsert(F.html,function(G,H,I){E.html(G)})}})},loadRoom:function(H){var F=this;var G=f(H.roomTab);if(this.getRoomCount()==0){G.removeClass("siropuChatActiveTab")}G.insertBefore(d);var I=this.createRoomMessageContainer(H.roomId);I.prependTo(v);this._initAutoScrollToggle(I);f('<ul class="siropuChatRoom siropuChatUsers" data-room-id="'+H.roomId+'" />').prependTo(v);this.activeUsers[H.roomId]=H.userIds;this.updateRooms(H);setTimeout(function(){F.doAutoScroll(I)});this.switchRoom(H.roomId);this.toggleLogout()},leaveRoom:function(G){var F=this;var G=G?G:this.roomId;XF.ajax("POST",XF.canonicalizeUrl("index.php?chat/room/"+G+"/leave"),{},function(H){F.leaveRoomPostActions(G)},{skipDefault:true})},leaveRoomPostActions:function(H,F){var J=A.find('[data-room-id="'+H+'"]');var G=C.find('[data-room-id="'+H+'"]');if(G.data("leave")==false){return false}J.remove();delete this.lastId[H];delete this.activeUsers[H];XF.Cookie.remove("siropu_chat_room_id");if(F){var I=C.find("[data-room-id]:last");if(I.length){I.click()}else{d.click()}}this.toggleLogout()},leaveConversationPostActions:function(F){A.find('[data-conv-id="'+F.convId+'"]').remove();this.convItems.splice(f.inArray(F.convId,this.convItems),1);XF.Cookie.remove("siropu_chat_conv_id");if(this.getConvCount()){r.find("li[data-conv-id]:first").click()}else{if(F.noConversations!==undefined){r.html(F.noConversations);XF.activate(r)}}},autoScroll:function(F){var F=F?F:f(".siropuChatMessages");if(F.attr("data-autoscroll")==1||this.forceAutoScroll){this.doAutoScroll(F)}},doAutoScroll:function(F){var F=F?F:f(".siropuChatMessages");if(this.inverse){F.scrollTop(0)}else{F.scrollTop(1000000)}},delayAutoscroll:function(H,G){var F=this;if(H.hasImages){setTimeout(function(){F.autoScroll(G)},1000)}else{this.autoScroll(G)}},getSoundSetting:function(F){return B.find('input[name="sound['+F+']"]').is(":checked")},getNotificationSetting:function(F){return B.find('input[name="notification['+F+']"]').is(":checked")},getMiscSetting:function(F){return B.find('input[name="'+F+'"]').is(":checked")},getCommand:function(F){return this.commands[F]},getNotificationPhrase:function(G){var F=this.getMessageType(G);switch(F){case"mention":case"public":return XF.phrase("siropu_chat_new_public_message");break;case"private":return XF.phrase("siropu_chat_new_private_message");break;case"whisper":return XF.phrase("siropu_chat_new_whisper_message");break;default:return XF.phrase("siropu_chat_new_message");break}},getMessageType:function(F){return F.channel=="room"?F.lastRow.type:F.convLastRow.type},playSound:function(F){if(XF.isIOS()){return false}if(F.channel=="room"){var G=F.playSound}else{var G=F.convPlaySound}if(this.sounds[G]){this.sounds[G].play()}},initDesktopNotification:function(G){var F=this;if(!("Notification" in g)){return}if(!this.getNotificationSetting(this.getMessageType(G))){return}if(Notification.permission==="granted"){this.sendDesktopNotification(G)}else{if(Notification.permission!=="denied"){Notification.requestPermission(function(H){if(H==="granted"){F.sendDesktopNotification(G)}})}}},sendDesktopNotification:function(I){if(I.channel=="room"){var H=I.lastRow}else{var H=I.convLastRow}var F=this;var G={body:H.text,icon:H.avatar,tag:"siropuChatNotification"};var J=new Notification(this.getNotificationPhrase(I),G);setTimeout(J.close.bind(J),this.notificationTimeout);J.onclick=function(){this.close();g.focus();if(k&&F.isVisible){y.click()}else{F.switchRoom()}}},displayTabNotification:function(G){var F=this;if(this.tabNotification&&!this.tabNotificationInterval){this.tabNotificationInterval=setInterval(function(){f("title").text(f("title").text()==F.pageTitle?F.getNotificationPhrase(G):F.pageTitle)},1500)}},switchRoom:function(I,G){var H=C.find('a[data-room-id="'+I+'"]');var F=H.data("flood-check");this.roomFloodCheck=F?F:this.floodCheck;H.trigger("click",G)},switchConversation:function(F){r.find('li[data-conv-id="'+F+'"]').click()},preSubmit:function(){var F=this;if(XF.isEditorEnabled()){this.editorSetHtml("");this.editorOffPlaceholder("posting")}else{c.find('textarea[name="message"]').val("")}this.responseTimeout=setTimeout(function(){F.editorSetPlaceholder("noresponse");F.editorOn();F.startRefreshInterval()},5000);this.stopRefreshInterval()},postSubmit:function(){if(this.inRoom()&&!this.getRoomCount()||this.inConv()&&!this.getConvCount()){this.editorOffPlaceholder("")}else{this.editorOn();this.editorFocus();if(this.inRoom()){this.editorSetPlaceholder("public")}else{this.editorSetPlaceholder("private",r.find('li[data-conv-id="'+this.convId+'"]'))}}clearTimeout(this.responseTimeout);this.startRefreshInterval()},saveSettings:function(G){var F=this;if(!B.length){return}XF.ajax("POST",XF.canonicalizeUrl("index.php?chat/save-settings"),B.serialize(),function(I){if(I.errorHtml){XF.setupHtmlInsert(I.errorHtml,function(J,K){var L=K.h1||K.title||XF.phrase("oops_we_ran_into_some_problems");XF.overlayMessage(L,J)});return true}var H="";if(G!==undefined){H=G.target.name}switch(H){case"inverse":F.inverse=F.getMiscSetting("inverse");F.autoScroll();break;case"maximized":A.toggleClass("siropuChatMaximized");F.adjustContentHeight();if(k&&!A.hasClass("siropuChatMaximized")){A.css("z-index","");v.css("height","")}break;case"display_mode":case"editor_on_top":if(H=="display_mode"&&A.hasClass("siropuChatPage")){return}XF.flashMessage(XF.phrase("siropu_chat_settings_change_reload_page"),3000);break;case"hide_bot":F.toggleBotMessages();break;case"hide_chatters":A.toggleClass("siropuChatHideUserList");break;case"disable":f("#siropuChatBar").remove();B.parents(".menu").remove();XF.flashMessage(XF.phrase("siropu_chat_has_been_disabled"),5000);XF.setupHtmlInsert(I.html,function(J,K){A.replaceWith(J)});break;default:if(H.match("sound")){F._initSounds()}break}},{skipDefault:true})},toggleChat:function(G){if(G.target.className.match("fa-")){return}A.toggle();x.toggle();this.isVisible=A.is(":visible");if(this.inRoom()){this.switchRoom(y.attr("data-room-id"))}if(this.inConv()&&this.isVisible&&this.hasUnreadConversations()){this.markCurrentConversationAsRead()}y.removeClass("siropuChatNewMessage");this.doAutoScroll();this.resetRefreshInterval();if(!this.screenSizeIs("s")){this.editorFocus()}var F=A.height()+y.height()+10;if(F>f(g).height()){this.adjustContentHeight()}},toggleAutoScroll:function(F){var H=parseInt(F[0].scrollHeight-F.innerHeight());var G=parseInt(F.scrollTop());F.attr("data-autoscroll",0);if(((G==H||G+1==H||G-1==H)&&!this.inverse)||G==0&&this.inverse){F.attr("data-autoscroll",1)}if(G==0&&!this.inverse||((G==H||G+1==H||G-1==H)&&this.inverse)){F.trigger("siropuChat:show-load-more")}},toggleLogout:function(){if(!z.length){return}var F=this.getRoomCount();var G=A.find('a[data-leave="false"]').length;if(F==0||(F-G)==0){z.fadeOut()}else{z.fadeIn()}},toggleBotMessages:function(){var F=f(".siropuChatRoom.siropuChatMessages > li.siropuChatBot");if(this.getMiscSetting("hide_bot")){F.fadeOut()}else{F.fadeIn()}},startRefreshInterval:function(){if(this.isVisible){if(this.options.active){this.refreshInterval=this.refreshActive}else{this.refreshInterval=this.refreshInactive}}else{if(this.options.active){this.refreshInterval=this.refreshActiveHidden}else{this.refreshInterval=this.refreshInactiveHidden}}this.refreshSet=setInterval(f.proxy(this,"refresh"),this.refreshInterval)},resetRefreshInterval:function(){this.stopRefreshInterval();var F=this;setTimeout(function(){F.startRefreshInterval()})},stopRefreshInterval:function(){clearInterval(this.refreshSet)},refresh:function(){var F=this;XF.ajax("GET",XF.canonicalizeUrl("index.php?chat/update"),{users:this.getUserList(),channel:this.channel,room_id:this.roomId,last_id:this.lastId,conv_id:this.convId,conv_unread:this.isVisible?this.convUnread:{},conv_only:this.convOnly,conv_items:this.getConvItems(),conv_last_active:this.convLastActive,conv_last_update:this.convLastUpdate,user_last_update:this.userLastUpdate,is_chat_page:A.hasClass("siropuChatPage")?1:0},function(G){F.updateRooms(G);F.updateConversations(G);F.updateNotice(G);F.updateActivityStatus(G);setTimeout(function(){F.doMessageActions(G)})},{skipDefault:true,skipError:true,global:false})},getUserList:function(){var F={};for(var G in this.activeUsers){F[G]=this.activeUsers[G].join(",")}return F},getConvItems:function(){return this.convItems.join(",")},adjustContentHeight:function(){var K=f(g).height();var F=A.height();var H=v.height();var J=y.height();var G=K-F;var I=0;if(f(".p-navSticky").length&&f(".p-navSticky.is-sticky").length){I=f(".p-navSticky").height()}if(f(".siropuChatAllPages.siropuChatMaximized").length){A.css("z-index",100);v.css("height",(H+G-J-I-20)+"px")}else{if(f("#siropuChatFullPage").length){v.css("height",(H+G)+"px")}else{if(this.screenSizeIs("s")){v.css("height",(H+G-J-20)+"px")}}}this.doAutoScroll()},adjustInputBox:function(){if(l.length){e.find(".fr-view").css("padding-right",l.outerWidth()+10)}},getFloodCheck:function(){if(this.bypassFloodCheck){return 0}if(this.inRoom()){return this.roomFloodCheck}else{return this.floodCheck}},editorFocus:function(){m.froalaEditor("events.focus")},editorOn:function(){m.froalaEditor("edit.on")},editorOff:function(){m.froalaEditor("edit.off")},editorInsert:function(F){m.froalaEditor("html.insert",F,true)},editorSetHtml:function(F){m.froalaEditor("html.set",F);if(F){m.froalaEditor("selection.set"+(XF.isRtl()?"Before":"After"),"p");m.froalaEditor("selection.restore")}},editorGetHtml:function(){return m.froalaEditor("html.get",true)},editorGetText:function(){return f.trim(m.data("froala.editor").$el.text())},editorSetPlaceholder:function(G,F){var H=" ";switch(G){case"public":H=XF.phrase("siropu_chat_write_public_message");break;case"private":if(this.getConvCount()){H="("+F.data("username")+") "+XF.phrase("siropu_chat_write_private_message")}else{H=XF.phrase("siropu_chat_no_conversations_started")}break;case"posting":H=XF.phrase("siropu_chat_posting_message");break;case"wait":H=XF.phrase("siropu_chat_please_wait");break;case"readonly":H=XF.phrase("siropu_chat_room_is_read_only");break;case"noresponse":H=XF.phrase("siropu_chat_no_response");break;case"nopermission":H=XF.phrase("siropu_chat_do_not_have_permission_to_use");break}m.data("froala.editor").opts.placeholderText=H;m.froalaEditor("placeholder.refresh")},editorOffPlaceholder:function(F){this.editorOff();this.editorSetPlaceholder(F)},editorOnPlaceholder:function(F){this.editorOn();this.editorSetPlaceholder(F)},loadSound:function(F){return this.sounds[F]?this.sounds[F]:new Audio(XF.config.url.basePath+"styles/default/siropu/chat/sounds/"+F+".mp3")},postLogout:function(){var F=this.getRoomCount();for(var G in this.lastId){this.leaveRoomPostActions(G,F!=0)}if(d.hasClass("siropuChatActiveTab")){this.getRooms()}else{if(!F){d.click()}}},setChannel:function(F){if(this.channel!=F){XF.Cookie.set("siropu_chat_channel",F);if(F=="room"){this.userUpdateInterval=30;this.convUpdateInterval=60}else{this.userUpdateInterval=60;this.convUpdateInterval=30}}this.channel=F},deleteOlderMessages:function(G,F){if(G-this.serverTime>=300&&F.find("> li[data-id]").length>=100&&F.data("autoscroll")==0){F.find(">li[data-id]:nth-child("+(this.inverse?"":"-")+"n+"+this.messageDisplayLimit+")").remove();this.serverTime=G}},_initRoomListActions:function(){var F=this;f(t).on("click",".siropuChatRoomInfo h3",function(){f(this).parents("li").find(".siropuChatRoomJoin").submit()});f(t).on("submit",".siropuChatRoomAction form",function(I){I.preventDefault();var H=f(this).find('button[type="submit"]');var G=f(this).find('input[name="password"]');if(G.length){G.toggle().focus();if(!G.val()){return}}H.prop("disabled",true);setTimeout(function(){H.prop("disabled",false);G.val("")},1000);XF.ajax("POST",f(this).attr("action"),{password:G.val(),users:F.getUserList()},function(J){if(J.action=="join"){F.loadRoom(J)}if(J.action=="leave"){F.leaveRoomPostActions(J.roomId)}F.getRooms()})})},_initRoomActions:function(){var F=this;f(t).on("click",".siropuChatRecipients",function(){var G=f(this).data("recipients").split(", ");F.editorInsert("/"+F.getCommand("whisper")+" ["+G.join(", ")+"] ")});f(t).on("click",".siropuChatTag, .siropuChatUserTag",function(G){var H=F.editorGetText();if(G.target.className.match("username")){G.preventDefault();var I=f(this).text()}else{var I=f(this).next("a").text()}F.editorInsert("@"+I+(H?"":", "))})},_initSubmitForm:function(){var F=this;m.on("froalaEditor.initialized",function(I,G){var H=m.data("buttons-remove");if(!XF.isEditorEnabled()&&H.match(/xfBbCode/)){XF.setIsEditorEnabled(true)}G.events.on("click",function(K){if(F.inConv()){var J=r.find('li[data-conv-id="'+F.convId+'"]');if(J.hasClass("siropuChatNewMessage")){J.removeClass("siropuChatNewMessage")}}});if(F.joinCommand){G.events.on("keyup",function(K){var M=F.editorGetText();var L=M.replace("/"+F.joinCommand,"").trim();if(M.match(/\/join/)&&L){var J=new XF.AutoCompleteResults({onInsert:function(N){F.editorSetHtml(M.replace(L,N));J.hideResults();c.submit()}});XF.ajax("GET",XF.canonicalizeUrl("index.php?chat/room/find"),{q:L},function(N){J.showResults(N.q,N.results,c)},{global:false,error:false})}})}if(!F.canUseChat){F.editorOffPlaceholder("nopermission")}else{if(F.inRoom()&&C.find('a[data-room-id="'+F.roomId+'"]').data("readonly")){F.editorOffPlaceholder("readonly")}else{if(F.inRoom()&&!F.getRoomCount()||F.inConv()&&!F.getConvCount()){F.editorOffPlaceholder("")}}}if(A.hasClass("siropuChatPage")&&!F.inIframe&&!F.screenSizeIs("s")){F.editorFocus()}F.adjustContentHeight();F.adjustInputBox()});c.on("submit",function(K){K.preventDefault();var H=F.editorGetHtml();var J=F.editorGetText();if(!XF.isEditorEnabled()){var G=e.find('textarea[name="message"]').val();H=G;J=G}if(!J&&!f(H).find("img").length){return F.editorSetHtml("")}var L=f('.siropuChatMessages[data-room-id="'+F.roomId+'"]');var I=f('.siropuChatUsers[data-room-id="'+F.roomId+'"]');F.preSubmit();XF.ajax("POST",XF.canonicalizeUrl("index.php?chat/submit"),{users:F.getUserList(),channel:F.channel,room_id:F.roomId,last_id:F.lastId,conv_id:F.convId,conv_items:F.getConvItems(),conv_unread:F.convUnread,message_html:H},function(M){if(M.roomIdle){I.find('> li[data-user-id="'+F.userId+'"]').remove();F.removeUserFromActiveUsers(F.roomId,F.userId);if(!F.activeUsers[F.roomId].length){F.addNoRoomUsersMessage(I)}F.postSubmit();return}if(M.input){F.editorSetHtml(M.input)}if(M.roomTab){F.loadRoom(M);F.postSubmit();return}if(M.find!==undefined){f(".siropuChatMessages:visible").html(f(M.messages)).attr("data-search",M.find);F.doAutoScroll();F.postSubmit();return}if(M.leaveRoom){F.leaveRoomPostActions(M.leaveRoom,true)}if(M.leaveConv){F.leaveConversationPostActions(M)}if(M.logout){F.postLogout()}if(M.html){XF.setupHtmlInsert(M.html,function(N,O){if(N.length){XF.overlayMessage(O.title,N)}})}if(M.prune){if(M.prune=="all"){f(".siropuChatMessages[data-room-id]").html("");F.lastId={}}else{if(M.prune=="room"){L.html("")}else{if(M.prune.user_id){L.find('> li[data-user-id="'+M.prune.user_id+'"]').remove()}else{if(M.prune.rows){if(F.inverse){L.find("> li").slice(0,Number(M.prune.rows)).remove()}else{L.find("> li").slice(Number(-M.prune.rows)).remove()}}}}}}if(M.sanctioned){I.find('> li[data-user-id="'+M.sanctioned+'"]').remove()}F.updateRooms(M);F.updateConversations(M);F.updateNotice(M);F.updateActivityStatus(M);if(F.getFloodCheck()){F.editorSetPlaceholder("wait")}setTimeout(function(){F.postSubmit()},F.getFloodCheck());if(F.inConv()){F.convLastActive=M.serverTime}},{global:false})})},_initTabs:function(){var F=this;C.on("click","a",function(I,G){I.preventDefault();f(this).removeClass("siropuChatNewMessage");v.find("> *").hide();C.find("a.siropuChatActiveTab").removeClass("siropuChatActiveTab");f(this).addClass("siropuChatActiveTab");F.editorSetPlaceholder("public");F.updateHeaderTitle(f(this));var H=f(this).data("target");switch(H){case"room":F.roomId=f(this).data("room-id");F.roomFloodCheck=f(this).data("flood-check");XF.Cookie.set("siropu_chat_room_id",F.roomId);v.find('[data-room-id="'+F.roomId+'"]').show();if(f(this).data("readonly")){F.editorOffPlaceholder("readonly")}else{F.editorOnPlaceholder("public")}if(F.isResponsive()){f(".siropuChatRoom.siropuChatUsers").hide()}else{if(!G){F.editorFocus()}}F.autoScroll();break;case"room-list":E.toggle();F.getRooms();F.editorOffPlaceholder("");break;case"conv-list":r.show();if(F.getConvCount()){r.find('li[data-conv-id="'+F.convId+'"]').trigger("click",true)}else{F.editorOffPlaceholder("")}break;case"conv-form":q.show();if(!F.screenSizeIs("s")){q.find("input").focus()}F.editorOffPlaceholder("");break}F.setChannel(H.match(/room/)?"room":"conv")})},_initConversations:function(){var F=this;r.on("click","li[data-conv-id]",function(H,G){F.convId=f(this).data("conv-id");XF.Cookie.set("siropu_chat_conv_id",F.convId);F.updateHeaderTitle(f(this));f(this).removeClass("siropuChatNewMessage");f(".siropuChatConversation.siropuChatMessages").hide();f(this).addClass("siropuChatActiveConversation").siblings().removeClass("siropuChatActiveConversation");var J=f('.siropuChatConversation.siropuChatMessages[data-conv-id="'+F.convId+'"]');if(J.find("> li").length){J.show();F.autoScroll(J);F.markCurrentConversationAsRead()}else{var I=f('<li class="siropuChatLoadingMessages" />');I.html(XF.phrase("siropu_chat_loading_conversation_messages"));J=F.createConversationMessageContainer(F.convId);J.html(I).insertBefore(q).show();F._initAutoScrollToggle(J);XF.ajax("POST",XF.canonicalizeUrl("index.php?chat/conversation/"+F.convId+"/load-messages"),{conv_unread:F.convUnread[F.convId]},function(K){J.html(K.messages);XF.activate(J);setTimeout(function(){F.doAutoScroll(J)})})}F.editorOn();F.editorSetPlaceholder("private",f(this));if(!F.inverse&&J.find("iframe").length){setTimeout(function(){F.autoScroll(J)},1000)}if(F.isResponsive()){if(G){J.hide()}else{r.hide()}}else{if(!G){F.editorFocus()}}});r.on("mouseover mouseout","> li",function(){f(this).find(".siropuChatConversationActions").toggle()})},_initOnLoad:function(){if(this.inverse){return}var F=this;f(".siropuChatMessages:visible .bbImage").on("load",function(){F.doAutoScroll()})},_initAutoScrollToggle:function(G){var F=this;var G=G?G:f(".siropuChatMessages");G.scroll(function(){F.toggleAutoScroll(f(this))})},_initSounds:function(){this.sounds.normal=this.getSoundSetting("normal")?this.loadSound("normal"):"";this.sounds.whisper=this.getSoundSetting("whisper")?this.loadSound("whisper"):"";this.sounds["private"]=this.getSoundSetting("private")?this.loadSound("private"):"";this.sounds.mention=this.getSoundSetting("mention")?this.loadSound("tag"):"";this.sounds.bot=this.getSoundSetting("bot")?this.loadSound("bot"):"";this.sounds.error=this.getSoundSetting("bot")?this.loadSound("error"):""},getChannel:function(){return this.channel},getRoomId:function(){return this.roomId},getConvId:function(){return this.convId},inRoom:function(){return this.channel=="room"},inConv:function(){return this.channel=="conv"},escapeRegExp:function(F){return isNaN(F)?F.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):F},addBarNewMessageClass:function(){if(k&&!this.isVisible){y.addClass("siropuChatNewMessage")}},removeUserFromActiveUsers:function(G,F){var H=this.activeUsers[G];this.activeUsers[G]=H.filter(function(I){return I!=F})},addNoRoomUsersMessage:function(F){F.html(f('<li class="siropuChatNoRoomUsers" />').html(XF.phrase("siropu_chat_no_one_is_chatting")))}});XF.SiropuChat.Form=XF.Element.newHandler({options:{edit:false,multiLine:false},init:function(){var G=this;var H=this.$target;var F=H.find("textarea");F.on("froalaEditor.initialized",function(J,I){I.opts.pastePlain=true;I.opts.multiLine=G.options.multiLine;I.opts.htmlAllowedTags=["img","a","table","tr","td"];I.events.on("keydown",function(K){if(K.which==13){if(G.options.multiLine&&K.shiftKey){return K.preventDefault()}H.submit();if(G.options.edit){H.find(".js-overlayClose").click()}}});if(G.options.edit){setTimeout(function(){F.froalaEditor("events.focus");F.froalaEditor("selection.set"+(XF.isRtl()?"Before":"After"),"p");F.froalaEditor("selection.restore")},500)}else{F.froalaEditor("html.set","")}});f("#siropuChatEditor").on("keyup","textarea",function(I){if(I.which==13&&!XF.isEditorEnabled()&&!G.options.multiLine){H.submit()}})}});XF.SiropuChat.Messages=XF.Element.newHandler({options:{},init:function(){f('a[data-xf-click="siropu-chat-quote"]').remove();this.$target.on("mouseover mouseout",".siropuChatMessageRow",function(){if(f(this).find(".siropuChatMessageActions").length){f(this).find(".siropuChatDateTime, .siropuChatMessageActions").toggle()}})}});XF.SiropuChat.FindRooms=XF.Element.newHandler({options:{},init:function(){this.$target.on("keyup",function(){var G=f(this).val().trim();var F=new RegExp(G,"gi");f("#siropuChatRooms > li[data-room-name]").hide().each(function(){if(f(this).data("room-name").match(F)){f(this).show()}})})}});XF.SiropuChat.StartConversationForm=XF.Element.newHandler({options:{},init:function(){var F=this;this.$target.on("submit",function(I){I.preventDefault();var H=f(this).find("input");var G=f(this).find("textarea");if(!H.val().trim()){return H.focus()}if(!G.val().trim()){return G.focus()}XF.ajax("POST",f(this).attr("action"),f(this).serialize()+"&conv_items="+XF.SiropuChat.Core.prototype.getConvItems(),function(J){j=f("#siropuChatNoConversations");if(j.length){j.remove()}XF.SiropuChat.Core.prototype.updateConversations(J);C.find('a[data-target="conv-list"]').click();H.val("");G.val("")})})}});XF.SiropuChat.LeaveConversation=XF.Element.newHandler({options:{},init:function(){this.$target.on("ajax-submit:response",f.proxy(this,"ajaxResponse"))},ajaxResponse:function(G,F){XF.SiropuChat.Core.prototype.updateConversations(F);XF.SiropuChat.Core.prototype.leaveConversationPostActions(F)}});XF.SiropuChat.Like=XF.Click.newHandler({eventNameSpace:"SiropuChatLike",init:function(){},click:function(G){G.preventDefault();var F=this;XF.ajax("POST",this.$target.attr("href"),function(H){if(H.html){XF.setupHtmlInsert(H.html,function(I,J,K){if(I.length){F.$target.parents(".siropuChatMessageRow").replaceWith(I)}})}})}});XF.SiropuChat.Unlike=XF.Click.newHandler({eventNameSpace:"SiropuChatUnlike",init:function(){},click:function(G){G.preventDefault();var F=this;XF.ajax("POST",this.$target.attr("href"),function(H){if(H.html){XF.setupHtmlInsert(H.html,function(I,J,K){if(I.length){F.$target.parents(".siropuChatMessageRow").replaceWith(I)}})}})}});XF.SiropuChat.Quote=XF.Click.newHandler({eventNameSpace:"SiropuChatQuote",init:function(){},click:function(F){F.preventDefault();XF.ajax("POST",this.$target.attr("href"),function(G){if(G.quote){XF.SiropuChat.Core.prototype.editorSetHtml(G.quoteHtml)}})}});XF.SiropuChat.LeaveRoom=XF.Click.newHandler({eventNameSpace:"SiropuChatLeaveRoom",init:function(){},click:function(G){G.preventDefault();var F=this;XF.ajax("POST",this.$target.attr("href"),function(H){XF.SiropuChat.Core.prototype.leaveRoomPostActions(H.roomId,true);F.$target.parent(".menu").toggle()})}});XF.SiropuChat.Whisper=XF.Click.newHandler({eventNameSpace:"SiropuChatWhisper",options:{username:""},init:function(){},click:function(M){var O=this.$target.parents(".menu").attr("id");var H=XF.SiropuChat.Core.prototype.editorGetText();var I=XF.SiropuChat.Core.prototype.getCommand("whisper");var F=[];F.push(this.options.username);if(H.match(/\[(.*?)\]/)){var P=H.indexOf("[");var J=H.indexOf("]");var L=H.substring(P+1,J);if(L.length){var N=L.split(",");for(var K in N){F.push(N[K].trim())}}if(L.match(XF.SiropuChat.Core.prototype.escapeRegExp(this.options.username))){F=F.filter(function(Q){return Q!=this.options.username})}}var G="";if(F.length){G="/"+I+" ["+F.join(", ")+"] "}XF.SiropuChat.Core.prototype.editorInsert(G)}});XF.SiropuChat.LoadMoreMessages=XF.Click.newHandler({eventNameSpace:"siropuChatLoadMoreMessages",init:function(){},click:function(I){I.preventDefault();var J=this.$target;if(J.data("complete")){return}var K=J.parents("ul.siropuChatMessages");var G=K.data("room-id");var L=K.data("conv-id");var N=K.attr("data-search");var H=XF.SiropuChat.Core.prototype.getMiscSetting("inverse");if(H){var M=K.find("> li[data-id]:last")}else{var M=K.find("> li[data-id]:first")}if(G){var F="room/"+G}else{var F="conversation/"+L}XF.ajax("GET",XF.canonicalizeUrl("index.php?chat/"+F+"/load-more-messages"),{message_id:M.data("id"),find:N},function(O){if(O.messages){if(H){M.after(O.messages)}else{M.before(O.messages).get(0).scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}XF.activate(M.parent())}if(!O.hasMore){J.attr("data-complete",true);J.html(XF.phrase("siropu_chat_all_messages_have_been_loaded"));setTimeout(function(){J.fadeOut()},5000)}})}});XF.SiropuChat.EditNotice=XF.Element.newHandler({options:{},init:function(){this.$target.on("ajax-submit:response",f.proxy(this,"ajaxResponse"))},ajaxResponse:function(G,F){if(F.message){XF.flashMessage(F.message,2000)}XF.SiropuChat.Core.prototype.updateNotice(F)}});XF.SiropuChat.ToggleUsers=XF.Click.newHandler({eventNameSpace:"siropuChatToggleUsers",init:function(){},click:function(H){var G=XF.SiropuChat.Core.prototype.getChannel();var F=XF.SiropuChat.Core.prototype.getRoomId();var I=XF.SiropuChat.Core.prototype.getConvId();if(G=="room"){f('.siropuChatUsers[data-room-id="'+F+'"]').toggle();f('.siropuChatMessages[data-room-id="'+F+'"]').toggle()}else{r.toggle();f('.siropuChatMessages[data-conv-id="'+I+'"]').toggle()}}});XF.SiropuChat.ToggleOptions=XF.Click.newHandler({eventNameSpace:"siropuChatToggleOptions",init:function(){},click:function(G){var F=this.$target.parents("fieldset").find("input");F.prop("checked",F.filter(":checked").length?false:true);B.change()}});XF.SiropuChat.ToggleConvForm=XF.Click.newHandler({eventNameSpace:"siropuChatToggleConvForm",init:function(){},click:function(G){var F=this.$target.parent(".siropuChatUserMenu").find("form");F.toggle();if(!XF.SiropuChat.Core.prototype.screenSizeIs("s")){F.find("textarea").focus()}}});XF.SiropuChat.ResetColor=XF.Click.newHandler({eventNameSpace:"SiropuChatResetColor",init:function(){},click:function(G){var F=B.find(".colorPickerBox");F.removeClass("is-active");F.find(".colorPickerBox-sample").attr("style","");B.find('input[name="message_color"]').val("");B.trigger("change")}});XF.SiropuChat.Logout=XF.Element.newHandler({options:{},init:function(){this.$target.on("ajax-submit:response",f.proxy(this,"ajaxResponse"))},ajaxResponse:function(G,F){if(F.errors||F.exception){return}G.preventDefault();if(F.message){XF.flashMessage(F.message,3000)}XF.SiropuChat.Core.prototype.postLogout()}});XF.SiropuChat.TextSelect=XF.Element.newHandler({options:{},init:function(){var F=this;setTimeout(function(){F.$target.select().focus()},500)}});XF.SiropuChat.EditorButton={init:function(){XF.SiropuChat.EditorButton.initializeDialog();XF.EditorHelpers.dialogs.chat=new XF.SiropuChat.EditorDialogGallery("chat");if(f.FE.COMMANDS.xfCustom_chat){f.FE.COMMANDS.xfCustom_chat.callback=XF.SiropuChat.EditorButton.callback}},initializeDialog:function(){XF.SiropuChat.EditorDialogGallery=XF.extend(XF.EditorDialog,{cache:false,_init:function(I){var H=this;var G=I.$container;var F=G.find(".formSubmitRow-controls");f(".siropuChatDialogInsert").click(function(J){J.preventDefault();f(".js-attachmentFileSelected").each(function(){H.ed.image.insert(f(this).data("url"))});H.overlay.hide()});f(".siropuChatDialogDelete").click(function(K){K.preventDefault();var J=[];f(".js-attachmentFileSelected").each(function(){J.push(f(this).data("attachment-id"))});if(J.length){XF.ajax("POST",XF.canonicalizeUrl("index.php?chat/delete-attachments"),{hash:G.find('input[name="hash"]').val(),remove:J,},function(L){if(L.success){f(".js-attachmentFileSelected").remove();if(!G.find(".js-attachmentFile").length){F.fadeOut()}}})}});G.on("click",".js-attachmentFile",function(){f(this).toggleClass("js-attachmentFileSelected");if(G.find(".js-attachmentFileSelected").length){F.fadeIn()}else{F.fadeOut()}})}})},callback:function(){XF.EditorHelpers.loadDialog(this,"chat")}};f(t).on("editor:first-start",XF.SiropuChat.EditorButton.init);XF.Element.register("siropu-chat","XF.SiropuChat.Core");XF.Element.register("siropu-chat-form","XF.SiropuChat.Form");XF.Element.register("siropu-chat-messages","XF.SiropuChat.Messages");XF.Element.register("siropu-chat-find-rooms","XF.SiropuChat.FindRooms");XF.Element.register("siropu-chat-start-conversation-form","XF.SiropuChat.StartConversationForm");XF.Element.register("siropu-chat-leave-conversation","XF.SiropuChat.LeaveConversation");XF.Element.register("siropu-chat-edit-notice","XF.SiropuChat.EditNotice");XF.Element.register("siropu-chat-logout","XF.SiropuChat.Logout");XF.Element.register("siropu-chat-text-select","XF.SiropuChat.TextSelect");XF.Click.register("siropu-chat-like","XF.SiropuChat.Like");XF.Click.register("siropu-chat-unlike","XF.SiropuChat.Unlike");XF.Click.register("siropu-chat-quote","XF.SiropuChat.Quote");XF.Click.register("siropu-chat-whisper","XF.SiropuChat.Whisper");XF.Click.register("siropu-chat-leave-room","XF.SiropuChat.LeaveRoom");XF.Click.register("siropu-chat-load-more-messages","XF.SiropuChat.LoadMoreMessages");XF.Click.register("siropu-chat-toggle-users","XF.SiropuChat.ToggleUsers");XF.Click.register("siropu-chat-toggle-options","XF.SiropuChat.ToggleOptions");XF.Click.register("siropu-chat-toggle-conv-form","XF.SiropuChat.ToggleConvForm");XF.Click.register("siropu-chat-reset-color","XF.SiropuChat.ResetColor")}(jQuery,window,document);