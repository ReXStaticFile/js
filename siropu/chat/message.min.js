!function(d,c,a,e){var b=d("#siropuChat");XF.SiropuChat.MessageSave=XF.Element.newHandler({options:{},init:function(){this.$target.on("ajax-submit:response",d.proxy(this,"ajaxResponse"))},ajaxResponse:function(i,h){if(h.html){if(h.channel=="room"){var f=d(".siropuChatRoom")}else{var f=d(".siropuChatConversation")}var g=f.find(".siropuChatMessageRow[data-id="+h.message_id+"]");XF.setupHtmlInsert(h.html,function(k,l,m){var j=k;if(d('ul[data-archive="true"]').length){j.find('a[data-xf-click="siropu-chat-quote"]').remove()}g.replaceWith(j);XF.activate(j)})}if(h.message){XF.flashMessage(h.message,1500)}}});XF.SiropuChat.MessageDelete=XF.Element.newHandler({options:{},init:function(){this.$target.on("ajax-submit:response",d.proxy(this,"ajaxResponse"))},ajaxResponse:function(h,g){if(g.channel=="room"){var f=d(".siropuChatRoom.siropuChatMessages")}else{var f=d(".siropuChatConversation.siropuChatMessages")}f.find(".siropuChatMessageRow[data-id="+g.message_id+"]").fadeOut();if(g.message){XF.flashMessage(g.message,1500)}setTimeout(function(){if(d("#siropuChatViewMessage").length){var i=d(".p-description > a").attr("href");return a.location.replace(i)}if(d("#siopuChatArchive").length&&!d(".siropuChatMessageRow:visible").length){location.reload()}},1000)}});XF.Element.register("siropu-chat-message-save","XF.SiropuChat.MessageSave");XF.Element.register("siropu-chat-message-delete","XF.SiropuChat.MessageDelete")}(jQuery,window,document);