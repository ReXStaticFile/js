var XFES=window.XFES||{};
!function(c,d,e,f){XFES.SuggestedThreads=XF.Element.newHandler({options:{searchUrl:null,searchContainer:"< form | .js-suggestedThreadContainer",searchDisabler:".js-suggestedThreadDisable",delay:500,onBlur:!0},enabled:!0,$searchContainer:null,searchedTitle:"",timeout:null,init:function(){if(this.options.searchUrl){var a=XF.findRelativeIf(this.options.searchContainer,this.$target);if(a.length){this.$searchContainer=a;a.on("click",this.options.searchDisabler,XF.proxy(this,"disable"));this.$target.on("keydown",
XF.proxy(this,"keydown"));if(this.options.delay)this.$target.on("input",XF.proxy(this,"debounceSearch"));if(this.options.onBlur)this.$target.on("blur",XF.proxy(this,"performSearch"));a=this.$target.closest("form");if(a.length)a.on("reset",XF.proxy(this,"hideSearchContainer"))}else console.error("No search container was found: %o",this.$target)}else console.error("No search URL was provided: %o",this.$target)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1;this.hideSearchContainer()},
keydown:function(a){if("Escape"===a.key&&this.enabled)return this.disable(),a.preventDefault(),!1},debounceSearch:function(){this.timeout&&clearTimeout(this.timeout);this.timeout=setTimeout(XF.proxy(this,"performSearch"),this.options.delay)},performSearch:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);if(this.enabled){var a=this.getInputTitle();a!==this.searchedTitle&&(this.searchedTitle=a,""===a?this.hideSearchContainer():XF.ajax("POST",this.options.searchUrl,{title:a},XF.proxy(this,
"handleResponse"),{skipDefault:!0}))}},handleResponse:function(a){if(a.errors||a.exception)this.hideSearchContainer();else if(a.title===this.getInputTitle())if(0===a.resultCount)this.hideSearchContainer();else{var b=this;XF.setupHtmlInsert(a.html,function(a){b.showSearchContainer(a)})}},getInputTitle:function(){return c.trim(this.$target.val())},showSearchContainer:function(a){var b=this.$searchContainer;b.html(a);XF.activate(b);b.is(":visible")||b.xfFadeDown(XF.config.speed.fast)},hideSearchContainer:function(){var a=
this.$searchContainer;a.xfFadeUp(XF.config.speed.fast,function(){a.empty()})}});XF.Element.register("suggested-threads","XFES.SuggestedThreads")}(jQuery,window,document);
