var MJ=window.MJ||{};MJ.Credits=window.MJ.Credits||{};
!function(b,e,d,f){MJ.Credits.EditorDialogCharge=XF.extend(XF.EditorDialog,{_beforeShow:function(a){b("#editor_mjc_credits_charge_title").val("")},_init:function(a){b("#editor_mjc_credits_charge_form").submit(XF.proxy(this,"submit"))},submit:function(a){a.preventDefault();a=this.ed;var c=this.overlay;a.selection.restore();MJ.Credits.EditorHelpers.insertCharge(a,b("#editor_mjc_credits_charge_title").val());c.hide()}});MJ.Credits.editorStart={started:!1,custom:[],startAll:function(){MJ.Credits.editorStart.started||
(MJ.Credits.editorStart.registerCommands(),MJ.Credits.editorStart.registerDialogs(),MJ.Credits.editorStart.started=!0)},registerCommands:function(){try{var a=b.parseJSON(b(".js-editorCustom").first().html())||{}}catch(c){console.error(c),a={}}"undefined"!==typeof a.charge&&b.FE.RegisterCommand("xfCustom_charge",{title:a.charge.title,icon:"xfCustom_charge",undo:!0,focus:!0,callback:function(){XF.EditorHelpers.loadDialog(this,"mjcCreditsCharge")}})},registerDialogs:function(){XF.EditorHelpers.dialogs.mjcCreditsCharge=
new MJ.Credits.EditorDialogCharge("mjcCreditsCharge")}};MJ.Credits.EditorHelpers={insertCharge:function(a,b){XF.EditorHelpers.wrapSelectionText(a,b?"[CHARGE="+b+"]":"[CHARGE]","[/CHARGE]",!0)}};b(d).one("editor:start",MJ.Credits.editorStart.startAll)}(jQuery,window,document);