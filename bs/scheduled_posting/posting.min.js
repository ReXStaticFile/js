!function(d,e,f){XF.ScheduleInput=XF.Element.newHandler({options:{minDate:null,maxDate:null,format:"DD.MM.YYYY HH:mm",triggerFormat:"Do MMMM YYYY HH:MM",step:1,locale:"en"},init:function(){this.$checkbox=this.$target.find(".js-scheduleCheckbox");this.$input=this.$target.find(".js-scheduleDate");this.$trigger=this.$target.find(".js-scheduleTrigger");this.$reset=this.$target.find(".js-scheduleReset");var a=this,b={defaultDate:moment().add(1,"hours"),minDate:this.options.minDate?moment.unix(this.options.minDate):
!1,maxDate:this.options.maxDate?moment.unix(this.options.maxDate):!1,format:this.options.format,stepping:this.options.step,locale:this.options.locale,widgetPositioning:{horizontal:"left",vertical:"auto"}};this.picker=this.$input.datetimepicker(b).on({"dp.show":XF.proxy(this,"onShow"),"dp.hide":XF.proxy(this,"onHide"),"dp.change":XF.proxy(this,"displayDate")}).data("DateTimePicker");this.$trigger.on("click",function(){a.picker.show()});this.$reset.on("click",function(){a.$target.hasClass("scheduled")?
a.reset():a.picker.show()});if(this.$input.closest("form"))this.$input.closest("form").on("ajax-submit:response",function(g,c){c.errors||a.reset()})},reset:function(){this.$trigger.text(XF.phrase("bssp_now"));this.$checkbox.prop("checked",!1);this.picker.clear();this.$input.val("");this.$target.removeClass("scheduled")},$widget:null,onShow:function(a){var b=this;this.$widget=this.$input.closest(".js-scheduleInput").find(".bootstrap-datetimepicker-widget").data("menu-trigger",function(){return{close:function(){b.picker.hide()}}}());
setTimeout(function(){XF.MenuWatcher.onOpen(b.$widget)});this.displayDate(a)},onHide:function(){XF.MenuWatcher.onClose(this.$widget)},displayDate:function(a){a.date&&(this.$trigger.text(a.date.format(this.options.triggerFormat)),this.$checkbox.prop("checked",!0),this.$target.addClass("scheduled"))}});XF.Element.register("schedule-input","XF.ScheduleInput")}(jQuery,window,document);