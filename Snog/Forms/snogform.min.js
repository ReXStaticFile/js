!function(t,e,i){"use strict";XF.SnogDisabler=XF.Element.newHandler({options:{container:"< li | ul, ol, dl",controls:"input, select, textarea, button, .js-attachmentUpload",hide:!1,optional:!1,invert:!1,autofocus:!0},$container:null,init:function(){this.$container=XF.findRelativeIf(this.options.container,this.$target),this.$container.length||this.options.optional||console.error("Could not find the disabler control container");var e=this.$target,o=e.closest("form");if(o.length&&o.on("reset",XF.proxy(this,"formReset")),e.is(":radio")){var n=o,s=e.attr("name");o.length||(n=t(i.body)),n.on("click",'input:radio[name="'+s+'"]',XF.proxy(this,"click"))}else e.click(XF.proxy(this,"click"));e.on("control:enabled control:disabled",XF.proxy(this,"recalculateAfter")),this.$container.one("editor:init",XF.proxy(this,"recalculateAfter")),this.recalculate(!0)},click:function(t,e){var i=e&&e.triggered;this.recalculateAfter(!1,i)},formReset:function(t){this.recalculateAfter(!1,!0)},recalculateAfter:function(t,e){var i=this;setTimeout(function(){i.recalculate(t,e)},0)},recalculate:function(e,i){var o=this.$container,n=this.$target,s=o.find(this.options.controls).not(n),a=e?0:XF.config.speed.fast,l=function(){i||o.find("input:not([type=hidden], [type=file]), textarea, select, button").not(n).first().autofocus()};if(n.is(":enabled")&&(n.is(":checked")&&!this.options.invert||this.options.invert&&!n.is(":checked")))if(o.prop("disabled",!1).removeClass("is-disabled"),s.prop("disabled",!1).removeClass("is-disabled").each(function(e,i){var o=t(i);o.is("select.is-readonly")&&o.prop("disabled",!0)}).trigger("control:enabled"),this.options.hide){if(e)o.show();else{if(this.options.autofocus)var r=function(){XF.layoutChange(),l()};else r=function(){XF.layoutChange()};o.slideDown(a,r)}XF.layoutChange()}else e||l();else this.options.hide&&(e?o.hide():o.slideUp(a,XF.layoutChange),XF.layoutChange()),o.prop("disabled",!0).addClass("is-disabled"),s.prop("disabled",!0).addClass("is-disabled").trigger("control:disabled").each(function(e,i){var o=t(i),n=o.data("disabled");null!==n&&void 0!==n&&o.val(n)})}}),XF.Element.register("snogdisabler","XF.SnogDisabler")}(jQuery,window,document);